<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>√Åudios de G√™nesis</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f9f9f9; padding: 2rem; max-width: 700px; margin: auto; }
    .verse { background: #fff; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); padding: 1rem; margin-bottom: 1.5rem; }
    h2 { color: #333; }
    .highlight { color: red; font-weight: bold; }
    .btn { margin-top: 0.5rem; margin-right: 0.5rem; padding: 0.4rem 0.8rem; border: none; border-radius: 5px; cursor: pointer; }
    .btn-play { background: #4caf50; color: white; }
    .btn-trans { background: #2196f3; color: white; }
    .btn-global { background: #673ab7; color: white; margin-bottom: 1rem; }
  </style>
</head>
<body>
  <h1>üìñ G√™nesis ‚Äî √Åudio em Ingl√™s e Tradu√ß√£o</h1>
  <button class="btn btn-global" id="playAll">‚ñ∂Ô∏è Tocar todos em Ingl√™s</button>
  <div id="container"></div>

  <script>
    const verses = [
      {
        ref: "G√™nesis 1:1",
        enText: "In the beginning God created the heavens and the earth.",
        ptText: "No princ√≠pio Deus criou os c√©us e a terra.",
        enFile: "genesis-1-1-en.mp3",
        ptFile: "genesis-1-1-pt.mp3"
      },
      {
        ref: "G√™nesis 1:2",
        enText: "Now the earth was formless and desolate, and there was darkness upon the surface of the watery deep, and God‚Äôs active force was moving about over the surface of the waters.",
        ptText: "A terra era vazia e deserta, e havia escurid√£o sobre as √°guas profundas; e a for√ßa ativa de Deus movia-se sobre as √°guas.",
        enFile: "genesis-1-2-en.mp3",
        ptFile: "genesis-1-2-pt.mp3"
      },
      {
        ref: "G√™nesis 1:3",
        enText: "And God said, 'Let there be light,' and there was light.",
        ptText: "Ent√£o Deus disse: 'Que haja luz.' E houve luz.",
        enFile: "genesis-1-3-en.mp3",
        ptFile: "genesis-1-3-pt.mp3"
      }
    ];

    const container = document.getElementById("container");

    const audios = []; // guardar todos os √°udios
    const wordGroups = []; // guardar spans de cada verso

    verses.forEach((v, i) => {
      const div = document.createElement("div");
      div.className = "verse";

      // separar as palavras do texto ingl√™s
      const words = v.enText.split(" ");
      const spanWords = words.map(w => `<span>${w}</span>`).join(" ");

      div.innerHTML = `
        <h2>${v.ref}</h2>
        <p><strong>EN:</strong> <span id="en-${i}">${spanWords}</span></p>
        <audio id="audio-${i}" preload="auto">
          <source src="${v.enFile}" type="audio/mpeg">
        </audio>
        <button class="btn btn-play" id="play-${i}">‚ñ∂Ô∏è Play</button>
        <button class="btn btn-trans" id="trans-${i}">Tradu√ß√£o</button>
        <div id="pt-${i}" style="display:none; margin-top:0.5rem;">
          <p><strong>PT:</strong> ${v.ptText}</p>
        </div>
      `;

      container.appendChild(div);

      const audio = div.querySelector(`#audio-${i}`);
      const playBtn = div.querySelector(`#play-${i}`);
      const spans = div.querySelectorAll(`#en-${i} span`);
      const transBtn = div.querySelector(`#trans-${i}`);
      const ptDiv = div.querySelector(`#pt-${i}`);

      audios.push(audio);
      wordGroups.push(spans);

      // Alternar Play/Pause individual
      playBtn.addEventListener("click", () => {
        if (audio.paused) {
          audio.play();
          playBtn.textContent = "‚è∏Ô∏è Pause";
        } else {
          audio.pause();
          playBtn.textContent = "‚ñ∂Ô∏è Play";
        }
      });

      // Resetar bot√£o quando terminar
      audio.addEventListener("ended", () => {
        playBtn.textContent = "‚ñ∂Ô∏è Play";
      });

      // Destaque aproximado por tempo
      audio.addEventListener("play", () => {
        const interval = audio.duration / words.length;
        let current = 0;
        spans.forEach(s => s.classList.remove("highlight"));

        const timer = setInterval(() => {
          if (audio.paused || current >= spans.length) {
            clearInterval(timer);
            return;
          }
          spans.forEach(s => s.classList.remove("highlight"));
          spans[current].classList.add("highlight");
          current++;
        }, interval * 1000);
      });

      // Alternar tradu√ß√£o
      transBtn.addEventListener("click", () => {
        ptDiv.style.display = ptDiv.style.display === "none" ? "block" : "none";
      });
    });

    // Bot√£o global "Tocar todos em Ingl√™s"
    document.getElementById("playAll").addEventListener("click", async () => {
      for (let i = 0; i < audios.length; i++) {
        const audio = audios[i];
        await new Promise(resolve => {
          audio.play();
          audio.addEventListener("ended", resolve, { once: true });
        });
      }
    });
  </script>
</body>
</html>
